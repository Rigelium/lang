<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://cdn.discordapp.com/attachments/638813266440880140/1452871487945048154/image.png?ex=694b6383&is=694a1203&hm=ea28a03cd258d23b8acf516ce5d50e8d8c18830545825d3c39ad702c7ab846fc">
    <title>Deicto</title>
   <style>
     :root{
       --fontcolor1: black;
       --fontcolor2: white;
       --fontcolor3: #a9b4c2;
       --highlight: #7c98a1;
       --boxcolor1: #1f2322;
       --blankcolor: black;
       --blueish: #28a0f4;
       --grayish: #5e6474;
     }
     body{
       font-family: arial;
       color: var(--fontcolor2);
       background-color: black;
     }
     #btn-container a{
       text-decoration: none;
       color: var(--fontcolor2);  
     }
     #btn-container a:hover{
       color: var(--highlight);  
     }
     .blank-button{
       background: var(--blankcolor); 
       border-radius: 2px; 
       margin: 0 2 0 2;
       padding: 1 2 1 2;
     }
     .box1{
       border-radius: 5px;
       background-color: var(--boxcolor1);
       padding: 10px;
     }
     .answer{
       border-radius: 5px;
       background-color: var(--boxcolor1);
       padding: 10px;
       height: 50px;
     }
     
   </style>
  </head>
<body>
  <div style="display: flex; flex-direction: column; justify-content: center; gap: 15px;">
    <div class="box1" style="display: flex; flex-direction: column; gap: 3px;">
      <div id="btn-container" style="display: flex; gap: 4px; flex-wrap: wrap; justify-content: center;"></div>
      <a id="translated" style="color: var(--fontcolor3); text-align: center;"></a>
    </div>
    <div id="answer-container" style="display: flex; flex-direction: column; gap: 10px;"></div>
    <div id="cont-container"></div>
  </div>
  <script>

    window.onload = loadLevelData;

    let levelData, sentencesHu, lvTitle = null;
    let currentSentence = 0;
    difLevel = "advanced";
    currentLevel = "1"
    
    async function loadLevelData() {
      try {
        const response = await fetch("../levels/hungarian/" + difLevel + "/lv_" + currentLevel + ".json");
        levelData = await response.json();        
        lvTitle = levelData.title;
        sentencesHu = levelData.sentences;  
        generateSentence();
      } catch (error) {
        console.error("Failed to load level data.", error);
      }
    }
    
    function generateSentence() {
      
      // GENERATING SENTENCE 
      container = document.getElementById("btn-container");

      for(let i = 0; i<sentencesHu[currentSentence][0].split(" ").length ; i++){
        const btn = document.createElement('a');
        btn.textContent = sentencesHu[currentSentence][0].split(" ")[i];
        btn.href = "https://en.wiktionary.org/wiki/" + btn.innerText.replace(/[.,?!]/g, "") + "#Hungarian";
        container.appendChild(btn); 
      }
      
      const btn = document.createElement('a');
        btn.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
        btn.className = "blank-button";
        btn.id = "hidden";
        container.appendChild(btn);
      
      for(let i = 0; i<sentencesHu[currentSentence][2].split(" ").length ; i++){
        const btn = document.createElement('a');
        btn.textContent = sentencesHu[currentSentence][2].split(" ")[i];
        btn.href = "https://en.wiktionary.org/wiki/" + btn.innerText.replace(/[.,?!]/g, "") + "#Hungarian";
        container.appendChild(btn);
      }

      //GENERATE THE TRANSLATION
      const translated = document.getElementById('translated');
      translated.textContent = sentencesHu[currentSentence][3];
    

    //GENERATE THE ANSWERS
    const answerContainer = document.getElementById("answer-container");
    const answer = [];
    const answerText = [];
    let answerGiven = 0;
    for(let i = 0; i < 4; i++){
      answer[i] = document.createElement('div');
      answer[i].className = "answer";
      
      answerText[i] = document.createElement('a');
      answerText[i].textContent = sentencesHu[currentSentence][i+4];

      answer[i].addEventListener('click', () =>{
        if(answerGiven == 0){
        const rightAnswer = document.getElementById('hidden');
        rightAnswer.textContent = sentencesHu[currentSentence][1];
        rightAnswer.style.backgroundColor = 'var(--boxcolor1)';
        rightAnswer.style.color = 'var(--blueish)';
        rightAnswer.href = "https://en.wiktionary.org/wiki/" + sentencesHu[currentSentence][1] + "#Hungarian";
        showContinue();
        if (answerText[i].textContent==sentencesHu[currentSentence][1]){
          //CORRECT CHOICE
          answer[i].style.backgroundColor = "var(--blueish)";
        }else{
          answer[i].style.backgroundColor = "red";
        }
        answerGiven = 1;
        }
      });
      
      answerContainer.appendChild(answer[i]);
      answer[i].appendChild(answerText[i]);
    }
    
    //GENERATE THE CONTINUE BUTTON
    function showContinue(){
      contContainer = document.getElementById('cont-container');
      const cont = document.createElement('div');
      cont.className="box1";
      //cont.style.backgroundColor="var(--grayish)";

      const nextSent = document.createElement('div');
      nextSent.className="box1";
      nextSent.style.backgroundColor="var(--highlight)";
      nextSent.style.width = "30%";

      const nextSentText = document.createElement('a');
      nextSentText.textContent = "Continue";
      
      
      nextSent.addEventListener("click", () => {
        currentSentence++;
        contContainer.replaceChildren();
        container.replaceChildren();
        answerContainer.replaceChildren();
        generateSentence();
      });

      nextSent.appendChild(nextSentText);
      cont.appendChild(nextSent);
      contContainer.appendChild(cont);
      
      }
    }
  </script>
</body>
</html>
